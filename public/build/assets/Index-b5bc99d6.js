import{u as U,r as k,k as z,l as j,a as h,m as K,c as x,w as C,b as n,d as e,i as s,g as i,q as S,h as d,n as Q,C as $,v as f,e as c,s as R,t as u,F as G,y as B}from"./app-99513220.js";import{_ as H}from"./Layout-61dc6c62.js";import{d as J}from"./debounce-823fcc0a.js";import{_ as D}from"./Modal-551bbec2.js";import"./index-dca72a42.js";import{_ as W}from"./Pagination-2a74e1d8.js";import{u as X}from"./useAction-799874c3.js";import"./SideNav.vue_vue_type_style_index_1_scoped_d3198c53_lang-c8ddfb98.js";import"./useDataStore-d37a8ed6.js";import"./_baseGetTag-92f65be8.js";const Y={class:"content-header row mb-1"},Z={class:"col-12 d-flex align-items-center justify-content-between"},ee=e("h2",{class:"float-start mb-0"},"Coupon List",-1),te=e("span",null,"Add New Category",-1),oe={class:"app-user-list"},se={class:"card"},le={class:"card-datatable table-responsive pt-0"},ne={class:"d-flex justify-content-between align-items-center header-actions mx-0 row mt-75"},ae={class:"col-sm-12 col-lg-4 d-flex justify-content-center justify-content-lg-start"},ie={class:"select-search-area"},de=e("option",{value:void 0},"10",-1),ce=e("option",{value:"25"},"25",-1),re=e("option",{value:"50"},"50",-1),ue=e("option",{value:"100"},"100",-1),pe=[de,ce,re,ue],me={class:"col-sm-12 col-lg-8 ps-xl-75 ps-0"},he={class:"d-flex align-items-center justify-content-center justify-content-lg-end flex-lg-nowrap flex-wrap"},_e={class:"select-search-area"},ve={class:"user-list-table table"},fe=e("thead",{class:"table-light"},[e("tr",{class:""},[e("th",{class:"sorting"},"#_SL"),e("th",{class:"sorting"},"Name"),e("th",{class:"sorting"},"Code"),e("th",{class:"sorting"},"Type"),e("th",{class:"sorting"},"Amount"),e("th",{class:"sorting"},"Limit"),e("th",{class:"sorting"},"Valid Date"),e("th",{class:"sorting"},"Status"),e("th",{class:"sorting"},"Actions")])],-1),ge={key:0,class:"badge badge-light-primary"},be={key:1,class:"badge badge-light-info"},we={key:0,class:"badge badge-light-success"},ye={key:1,class:"badge badge-light-warning"},ke={class:"btn-group dropup dropdown-icon-wrapper"},xe=e("button",{type:"button",class:"btn dropdown-toggle dropdown-toggle-split waves-effect waves-float waves-light","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-more-vertical"},[e("circle",{cx:"12",cy:"12",r:"1"}),e("circle",{cx:"12",cy:"5",r:"1"}),e("circle",{cx:"12",cy:"19",r:"1"})])],-1),Ce={class:"dropdown-menu"},Se=["onClick"],Ve=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-down-left"},[e("line",{x1:"17",y1:"7",x2:"7",y2:"17"}),e("polyline",{points:"17 17 7 17 7 7"})],-1),Ie=e("span",{class:"ms-1"},"Inactive",-1),Ne=[Ve,Ie],Ae=["onClick"],Ue=e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",class:"feather feather-arrow-up-right"},[e("line",{x1:"7",y1:"17",x2:"17",y2:"7"}),e("polyline",{points:"7 7 17 7 17 17"})],-1),je=e("span",{class:"ms-1"},"Active",-1),$e=[Ue,je],Be=["onClick"],De=e("span",{class:"ms-1"},"Show",-1),Te=["onClick"],Le=e("span",{class:"ms-1"},"Delete",-1),Fe={class:"modal-body"},Me=e("label",null,"Coupon Code",-1),Ee={class:"mt-1"},Pe=e("label",null,"Coupon Name",-1),Oe={class:"mt-1"},qe=e("label",null,"Coupon Amount",-1),ze={class:"mt-1"},Ke=e("label",null,"Coupon Using Limit",-1),Qe={class:"mt-1"},Re=e("label",null,"Select Amount Type",-1),Ge={class:"mt-1"},He=e("label",null,"Valid Date: ",-1),Je={class:"modal-footer"},We=["disabled"],Xe=e("button",{type:"reset",class:"btn btn-outline-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Cancel ",-1),Ye={class:"modal-body"},Ze={class:"modal-footer"},et=["disabled"],tt=e("button",{type:"reset",class:"btn btn-outline-secondary","data-bs-dismiss":"modal","aria-label":"Close"},"Cancel ",-1),pt={__name:"Index",props:{coupons:Object,filters:Object,url:String},setup(p){const m=p,{deleteItem:T}=X();let L=[{name:"flat"},{name:"percent"}],l=U({name:"",code:"",price:"",type:"",validate:"",limit:""}),r=U({name:"",photo:null}),F=a=>{for(var o="",g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789~!@#$%^&*(){}[]",b=g.length,w=0;w<a;w++)o+=g.charAt(Math.floor(Math.random()*b));return o},V=()=>{l.code=F(15),document.getElementById("createNewcoupon").$vb.modal.show()},I=()=>{l.post(m.url,{onSuccess:()=>{document.getElementById("createNewcoupon").$vb.modal.hide(),l.reset()}})},M=k({}),E=a=>{console.log(r),r.put(m.url+"/"+a,{onSuccess:()=>{document.getElementById("updatecoupon").$vb.modal.hide(),r.reset()}})},N=(a,o)=>{console.log(a),j.Inertia.post(`/panel/coupon/activation/${a}?show_status=${o}`,{onSuccess:()=>{}})},_=k(m.filters.search),v=k(m.filters.perPage);return z([_,v],J(function([a,o]){j.Inertia.get(m.url,{search:a,perPage:o},{preserveState:!0,replace:!0})},300)),(a,o)=>{const g=h("vue-feather"),b=h("Icon"),w=h("vSelect"),P=h("Datepicker"),O=h("Text"),q=h("Image"),A=K("vb-is");return n(),x(H,null,{default:C(()=>[e("div",Y,[e("div",Z,[ee,e("button",{class:"btn btn-sm btn-gradient-primary d-flex align-items-center",onClick:o[0]||(o[0]=(...t)=>s(V)&&s(V)(...t)),type:"button"},[i(g,{type:"plus",size:"15"}),te])])]),e("section",oe,[e("div",se,[e("div",le,[e("div",ne,[e("div",ae,[e("div",ie,[e("label",null,[S("Show "),d(e("select",{class:"form-select","onUpdate:modelValue":o[1]||(o[1]=t=>$(v)?v.value=t:v=t)},pe,512),[[Q,s(v)]]),S(" entries")])])]),e("div",me,[e("div",he,[e("div",_e,[e("label",null,[S("Search:"),d(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>$(_)?_.value=t:_=t),type:"search",class:"form-control",placeholder:"Type here for search"},null,512),[[f,s(_)]])])])])])]),e("table",ve,[fe,e("tbody",null,[(n(!0),c(G,null,R(p.coupons.data,t=>(n(),c("tr",{key:t.id},[e("td",null,u(t.id),1),e("td",null,u(t.name),1),e("td",null,u(t.code),1),e("td",null,[t.type==="flat"?(n(),c("span",ge,"Flat")):(n(),c("span",be,"Percentage"))]),e("td",null,u(t.value)+" "+u(t.type==="flat"?"TK":"%"),1),e("td",null,u(t.limit),1),e("td",null,u(t.validate),1),e("td",null,[t.status=="1"?(n(),c("span",we,"Active")):(n(),c("span",ye,"Inactive"))]),e("td",null,[e("div",ke,[xe,e("div",Ce,[t.status=="1"?(n(),c("span",{key:0,class:"dropdown-item",onClick:y=>s(N)(t.id,!1)},Ne,8,Se)):(n(),c("span",{key:1,class:"dropdown-item",onClick:y=>s(N)(t.id,!0)},$e,8,Ae)),e("span",{class:"dropdown-item",onClick:y=>a.showItem(t.id)},[i(b,{title:"eye"}),De],8,Be),e("span",{class:"dropdown-item",onClick:y=>s(T)(m.url,t.id)},[i(b,{title:"trash"}),Le],8,Te)])])])]))),128))])]),i(W,{links:p.coupons.links,from:p.coupons.from,to:p.coupons.to,total:p.coupons.total},null,8,["links","from","to","total"])]),d((n(),x(D,{id:"createNewcoupon",title:"Create New coupon"},{default:C(()=>[e("form",{onSubmit:o[9]||(o[9]=B((...t)=>s(I)&&s(I)(...t),["prevent"]))},[e("div",Fe,[e("div",null,[Me,d(e("input",{class:"form-control","onUpdate:modelValue":o[3]||(o[3]=t=>s(l).code=t),type:"text",placeholder:"Coupon Code"},null,512),[[f,s(l).code]])]),e("div",Ee,[Pe,d(e("input",{class:"form-control","onUpdate:modelValue":o[4]||(o[4]=t=>s(l).name=t),type:"text",placeholder:"Coupon name"},null,512),[[f,s(l).name]])]),e("div",Oe,[qe,d(e("input",{class:"form-control","onUpdate:modelValue":o[5]||(o[5]=t=>s(l).price=t),type:"text",placeholder:"Coupon Amount"},null,512),[[f,s(l).price]])]),e("div",ze,[Ke,d(e("input",{class:"form-control","onUpdate:modelValue":o[6]||(o[6]=t=>s(l).limit=t),type:"text",placeholder:"Max Using Limit"},null,512),[[f,s(l).limit]])]),e("div",Qe,[Re,i(w,{modelValue:s(l).type,"onUpdate:modelValue":o[7]||(o[7]=t=>s(l).type=t),label:"name",options:s(L),reduce:t=>t.name,placeholder:"Select Amount Type"},null,8,["modelValue","options","reduce"])]),e("div",Ge,[He,i(P,{modelValue:s(l).validate,"onUpdate:modelValue":o[8]||(o[8]=t=>s(l).validate=t),monthChangeOnScroll:!1,placeholder:"Select Quotation Date",autoApply:""},null,8,["modelValue"])])]),e("div",Je,[e("button",{disabled:s(l).processing,type:"submit",class:"btn btn-primary waves-effect waves-float waves-light"},"Submit ",8,We),Xe])],32)]),_:1})),[[A,void 0,"modal"]]),d((n(),x(D,{id:"updatecoupon",title:"Create New coupon"},{default:C(()=>[e("form",{onSubmit:o[12]||(o[12]=B(t=>s(E)(s(M).id),["prevent"]))},[e("div",Ye,[i(O,{modelValue:s(r).name,"onUpdate:modelValue":o[10]||(o[10]=t=>s(r).name=t),label:"coupon Name",placeholder:"coupon Name"},null,8,["modelValue"]),i(q,{modelValue:s(r).photo,"onUpdate:modelValue":o[11]||(o[11]=t=>s(r).photo=t),label:"coupon Image"},null,8,["modelValue"])]),e("div",Ze,[e("button",{disabled:s(l).processing,type:"submit",class:"btn btn-primary waves-effect waves-float waves-light"},"Submit ",8,et),tt])],32)]),_:1})),[[A,void 0,"modal"]])])])]),_:1})}}};export{pt as default};
