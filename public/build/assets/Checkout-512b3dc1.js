import{_ as L,o as $,r as _,x as E,a as N,c as M,w as O,b as n,d as e,e as d,F as j,s as F,h as P,G as R,t as a,q as T,g as U,f as b,i as f,v as Y,l as q,p as z,j as G}from"./app-99513220.js";import{L as H}from"./Layout-f01ab17d.js";import{u as J}from"./useCartStore-c4d05e33.js";import{a as K}from"./index-dca72a42.js";import{u as Q}from"./useData-7b64a6ef.js";/* empty css                 */import"./MainFooter-e46f7cea.js";import"./useDataStore-d37a8ed6.js";import"./debounce-823fcc0a.js";import"./_baseGetTag-92f65be8.js";import"./UserImageWithUpload-27151807.js";import"./DropdownNav-34645a4b.js";const i=u=>(z("data-v-d16a31c0"),u=u(),G(),u),W={class:"container-sm mt-5"},X={class:"row"},Z={key:0,class:"col-xl-9 mb-3 mb-xl-0"},ee=i(()=>e("h2",{class:"card-title fw-bold"},"Select Your Shipping Detail's",-1)),te={key:0},se={class:"row match-height mt-3"},ae={class:"card rounded-3 overflow-hidden page-shadow"},oe={class:"card-body p-0"},re=["name","value","onInput","id"],le=["for"],ne={class:"d-flex align-items-center justify-content-between mb-2"},ce={class:"text-capitalize text-primary"},de={class:"mb-0"},ie={class:"text-primary"},ue={class:"text-primary"},_e={key:1},pe=i(()=>e("a",{class:"btn btn-primary",href:""},"Add Address",-1)),he=[pe],ve={key:1},ge={class:"btn btn-primary d-flex align-items-center gap-1 mt-2",style:{width:"max-content"},href:"/customer/address"},ye=i(()=>e("span",null,"Add New Address",-1)),fe={class:"col-xl-3 mb-4"},me={class:"border rounded p-2 mb-3 bg-white page-shadow"},be={class:"text-end"},Ce=i(()=>e("hr",{class:"mt-2"},null,-1)),xe={class:"row mb-0"},Ie=i(()=>e("dt",{class:"col-6 fw-normal"},"Bag Total",-1)),we={class:"col-6 text-end"},ke={key:0,class:"col-6 fw-normal"},Pe={key:1,class:"col-6 text-success text-end"},Te=i(()=>e("dt",{class:"col-6 fw-normal"},"Delivery Charge",-1)),Se={class:"col-6 text-end"},De=i(()=>e("hr",null,null,-1)),Ae=i(()=>e("dt",{class:"col-6"},"Total",-1)),Be={class:"col-6 fw-semibold text-end mb-0"},Ve={class:"apply-coupon"},Le={class:"text-danger"},$e={class:"d-grid mb-2 mb-lg-0 mt-3"},Ee=["disabled"],Ne={__name:"Checkout",props:{main_url:String|null,user:Array|null,checkOutData:Object|null,apply_coupon_url:String|null},setup(u){const p=u,{priceSignature:S}=Q(),o=J();$(()=>{o.initCart()});const l=_(0),h=_(0),v=_(!1),D=s=>{l.value=s.order_area},m=_(null),g=_(null),r=_(null),A=()=>{K.post(p.apply_coupon_url,{data:m.value}).then(s=>{s.data.status===200?(r.value=s.data.code,g.value=null):g.value=s.data.message}).catch(s=>{g.value=s.response.data.errors.data[0]})},B=E(()=>{let s=parseInt(o.getCartTotalPrice);if(r.value)if(r.value.type==="percent"){let y=parseInt(o.getCartTotalPrice)*r.value.value/100;s=parseInt(o.getCartTotalPrice)-y,h.value=y}else h.value=parseInt(r.value.value),s=parseInt(o.getCartTotalPrice)-parseInt(r.value.value);let c=0;return l.value&&(parseInt(o.getCartTotalPrice)>=l.value.charge_condition?c=l.value.charge_condition_price:c=l.value.delivery_charge),s+parseInt(c)}),V=()=>{l.value?q.Inertia.post(p.main_url,{cartItems:o.getCartItems,totalItems:o.getCartLength,cartTotalPrice:o.getCartTotalPrice,address:l.value,couponData:r.value,couponDiscount:h.value},{preserveState:!0,replace:!0,onStart:s=>{v.value=!0},onSuccess:s=>{v.value=!1,$sToast.fire({icon:"success",title:s.props.info.message})},onError:s=>{document.getElementById("actionModal").$vb.modal.hide(),v.value=!1,$toast.error("Validation Errors...")}}):$sToast.fire({icon:"warning",title:"Please Select An Delivery Address..."})};return(s,c)=>{const y=N("vue-feather");return n(),M(H,null,{default:O(()=>[e("div",W,[e("div",X,[u.checkOutData!==void 0?(n(),d("div",Z,[ee,p.user.addresses.length>0?(n(),d("div",te,[e("div",se,[p.user.addresses?(n(!0),d(j,{key:0},F(p.user.addresses,t=>{var C,x,I,w;return n(),d("div",{class:"col-md-6 shadow-none",key:t.title},[e("div",ae,[e("div",oe,[P(e("input",{class:"custom-option-item-check",type:"radio",name:"item-"+s.id,"onUpdate:modelValue":c[0]||(c[0]=k=>s.address=k),value:t.id,onInput:k=>D(t),id:"item-"+t.id},null,40,re),[[R,s.address]]),e("label",{class:"custom-option-item p-1",for:"item-"+t.id},[e("div",ne,[e("h2",ce,a(t==null?void 0:t.title),1)]),e("p",null,a(t==null?void 0:t.address),1),e("p",de,a(t==null?void 0:t.email),1),e("p",null,a(t==null?void 0:t.phone),1),e("p",null,"Area: "+a((C=t==null?void 0:t.order_area)==null?void 0:C.area_name)+" & Delivery Charge: "+a((x=t==null?void 0:t.order_area)==null?void 0:x.delivery_charge),1),e("p",null,[T("If you buy up to "),e("strong",ie,a((I=t==null?void 0:t.order_area)==null?void 0:I.charge_condition),1),T(" then your delivery charge is "),e("strong",ue,a((w=t==null?void 0:t.order_area)==null?void 0:w.charge_condition_price),1)])],8,le)])])])}),128)):(n(),d("div",_e,he))])])):(n(),d("div",ve,[e("a",ge,[ye,U(y,{type:"arrow-right"})])]))])):b("",!0),e("div",fe,[e("div",me,[e("span",be,a(`${f(o).getCartLength} Items In Your Bag`),1),Ce,e("dl",xe,[Ie,e("dd",we,a(f(o).getCartTotalPrice),1),r.value?(n(),d("dt",ke,"Discount ("+a(r.value.value+" ")+a(r.value.type=="percent"?"%":f(S))+" ) ",1)):b("",!0),r.value?(n(),d("dd",Pe,a(h.value),1)):b("",!0),Te,e("dd",Se,a(f(o).getCartTotalPrice>=l.value.charge_condition?l.value.charge_condition_price:l.value.delivery_charge??0),1),De,Ae,e("dd",Be,a(B.value),1)])]),e("div",Ve,[P(e("input",{type:"text","onUpdate:modelValue":c[1]||(c[1]=t=>m.value=t),class:"form-control",placeholder:"coupon code"},null,512),[[Y,m.value]]),e("button",{onClick:A},"Apply Coupon")]),e("p",Le,a(g.value??""),1),e("div",$e,[e("button",{onClick:V,disabled:v.value,class:"btn btn-primary btn-next"},"Place Order ",8,Ee)])])])])]),_:1})}}},Ke=L(Ne,[["__scopeId","data-v-d16a31c0"]]);export{Ke as default};
