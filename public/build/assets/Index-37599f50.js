import{u as T,r as I,k as z,l as N,a as M,m as B,c as O,w as q,b as s,d as e,g as r,h as g,n as W,q as m,v as U,e as o,s as Y,i as a,t as c,F as G,y as E,f as p}from"./app-99513220.js";import{_ as H}from"./Layout-61dc6c62.js";import{d as J}from"./debounce-823fcc0a.js";import{_ as S}from"./ImageUploader-3ca64e71.js";import{a as K}from"./index-dca72a42.js";import{_ as Q}from"./Pagination-2a74e1d8.js";import{u as R}from"./useAction-799874c3.js";import"./SideNav.vue_vue_type_style_index_1_scoped_d3198c53_lang-c8ddfb98.js";import"./useDataStore-d37a8ed6.js";import"./_baseGetTag-92f65be8.js";const X={class:"content-header row mb-1"},Z={class:"col-12 d-flex align-items-center justify-content-between"},ee=e("h2",{class:"float-start mb-0"},"Sub Category List",-1),te={class:"btn btn-sm btn-gradient-primary d-flex align-items-center",type:"button","data-bs-toggle":"modal","data-bs-target":"#addItemModal"},se=e("span",null,"Add New Sub Category",-1),oe={class:"app-user-list"},le={class:"card"},ne={class:"card-datatable table-responsive pt-0 px-2"},ae={class:"d-flex align-items-center justify-content-between border-bottom"},ie={class:"select-search-area d-flex align-items-center"},re=e("option",{value:void 0},"10",-1),de=e("option",{value:"25"},"25",-1),ce=e("option",{value:"50"},"50",-1),ue=e("option",{value:"100"},"100",-1),_e=[re,de,ce,ue],me={class:"d-flex align-items-center justify-content-center justify-content-lg-end flex-lg-nowrap flex-wrap"},pe={class:"select-search-area"},be={class:"category-list-table table"},he=e("thead",{class:"table-light"},[e("tr",{class:"null"},[e("th",{class:"sorting"},"Id"),e("th",{class:"sorting"},"name"),e("th",{class:"sorting"},"Category"),e("th",{class:"sorting"},"icon"),e("th",{class:"sorting"},"banner"),e("th",{class:"sorting"},"Created At"),e("th",{class:"sorting"})])],-1),ge=["onDblclick"],fe={key:0,class:"d-flex align-items-center"},ve={class:"text-info",style:{"margin-left":"5px"}},ye={key:1,class:"text-capitalize"},xe=["src"],ke={key:1},we=["src"],Ve={key:1},Ie=["onClick"],Se=["onClick"],Ce={class:"modal modal-slide-in fade",id:"addItemModal","aria-hidden":"true"},$e={class:"modal-dialog"},Me={class:"modal-content p-0"},Ue=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},"×",-1),je=e("div",{class:"modal-header mb-1"},[e("h5",{class:"modal-title"},[e("span",{class:"align-middle"},"Add new category")])],-1),Te={class:"modal-body flex-grow-1"},Be=["onSubmit"],Ee={class:"mb-1"},Le=e("label",{class:"form-label"},"Title",-1),Ae={key:0,class:"text-danger"},De={class:"mb-1"},Fe={class:"d-flex align-baseline"},Pe=e("label",null,"Parent Category",-1),ze={key:0,class:"text-danger"},Ne={class:"mb-1"},Oe=e("label",null,"Icon Image",-1),qe={key:0,class:"text-danger"},We={class:"mb-1"},Ye=e("label",null,"Banner Image",-1),Ge={key:0,class:"text-danger"},He={class:"d-flex flex-wrap mb-0"},Je={key:0,type:"submit",class:"btn btn-primary"},Ke={key:1,class:"btn btn-primary",type:"button",disabled:""},Qe=e("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Re=e("button",{type:"reset",class:"btn btn-outline-secondary ms-1"},"Cancel",-1),Xe={class:"modal modal-slide-in fade",id:"editItemModal","aria-hidden":"true"},Ze={class:"modal-dialog"},et={class:"modal-content p-0"},tt=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},"×",-1),st=e("div",{class:"modal-header mb-1"},[e("h5",{class:"modal-title"},[e("span",{class:"align-middle"},"Edit Category")])],-1),ot={class:"modal-body flex-grow-1"},lt=["onSubmit"],nt={class:"mb-1"},at=e("label",{class:"form-label"},"Title",-1),it={key:0,class:"text-danger"},rt={class:"mb-1"},dt={class:"d-flex align-baseline"},ct=e("label",null,"Parent Category",-1),ut={key:0,class:"text-danger"},_t={class:"mb-1"},mt=e("label",null,"Icon Image",-1),pt=["src"],bt={key:1,class:"text-danger"},ht={class:"mb-1"},gt=e("label",null,"Banner Image",-1),ft=["src"],vt={key:1,class:"text-danger"},yt={class:"d-flex flex-wrap mb-0"},xt={key:0,type:"submit",class:"btn btn-primary"},kt={key:1,class:"btn btn-primary",type:"button",disabled:""},wt=e("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Vt=e("button",{type:"reset",class:"btn btn-outline-secondary ms-1"},"Cancel",-1),Lt={__name:"Index",props:{categories:[]|null,parent_categories:[]|null,main_url:String|null,errors:Object|null,filters:Object},setup(f){const n=f,{deleteItem:L,copyToClipboard:A}=R();let u=T({title:null,parent_id:null,order_level:null,type:null,icon:null,banner:null}),i=T({id:null,title:null,parent_id:null,order_level:null,type:null,icon:null,banner:null});const h=I(!1),j=I(null),D=()=>{j.value=null,u.post(n.main_url,{preserveState:!0,replace:!0,onStart:_=>{console.log("res "+_),h.value=!0},onSuccess:_=>{document.getElementById("addItemModal").$vb.modal.hide(),h.value=!1,u.reset(),$sToast.fire({icon:"success",title:"Signed in successfully"})},onError:_=>{h.value=!1,$toast.error("Validation Errors...")}})},F=(_,l)=>{j.value=null,K.get(`${n.main_url}/${_}`).then(d=>{var b,v,w,y,t,V,x,k;i.id=(b=d.data)==null?void 0:b.id,i.title=(v=d.data)==null?void 0:v.title,i.parent_id=(y=(w=d.data)==null?void 0:w.category)==null?void 0:y.id,i.order_level=(t=d.data)==null?void 0:t.order_level,i.type=(V=d.data)==null?void 0:V.type,i.icon=(x=d.data)==null?void 0:x.icon,i.banner=(k=d.data)==null?void 0:k.banner,document.getElementById("editItemModal").$vb.modal.show()}).catch(d=>{console.log(d),console.log(d.message)})},P=()=>{i.post(`/panel/sub-category/update/${i.id}`,{preserveState:!0,replace:!0,onSuccess:_=>{document.getElementById("editItemModal").$vb.modal.hide(),h.value=!1,u.reset(),$sToast.fire({icon:"success",title:"Signed in successfully"})},onError:_=>{h.value=!1,$toast.error("Validation Errors...")}})},C=I(),$=I();return z([C,$],J(function([_,l]){N.Inertia.get(n.main_url,{search:_,perPage:l},{preserveState:!0,replace:!0})},300)),(_,l)=>{const d=M("vue-feather"),b=M("info"),v=M("vSelect"),w=B("c-tooltip"),y=B("vb-is");return s(),O(H,null,{default:q(()=>[e("div",X,[e("div",Z,[ee,e("button",te,[r(d,{type:"plus",size:"15"}),se])])]),e("section",oe,[e("div",le,[e("div",ne,[e("div",ae,[e("div",ie,[g(e("select",{class:"form-select","onUpdate:modelValue":l[0]||(l[0]=t=>$.value=t)},_e,512),[[W,$.value]])]),e("div",me,[e("div",pe,[e("label",null,[m("Search "),g(e("input",{"onUpdate:modelValue":l[1]||(l[1]=t=>C.value=t),type:"search",class:"form-control",placeholder:"What You Find ?","aria-controls":"DataTables_Table_0"},null,512),[[U,C.value]])])])])]),e("table",be,[he,e("tbody",null,[(s(!0),o(G,null,Y(f.categories.data,(t,V)=>{var x;return s(),o("tr",{key:t.id,onDblclick:k=>a(A)(t.slug)},[e("td",null,"#_"+c(V+1),1),e("td",null,[t.childrens_count>0?(s(),o("span",fe,[m(c(t.title)+" ",1),g((s(),o("span",ve,[r(d,{type:"info",size:"15"})])),[[w,`${t.childrens_count} Child In This Category.`]])])):(s(),o("span",ye,c(t.title),1))]),e("td",null,c((x=t==null?void 0:t.category)==null?void 0:x.title),1),e("td",null,[t.icon?(s(),o("img",{key:0,src:t.icon,alt:"",style:{"object-fit":"contain",height:"50px"}},null,8,xe)):(s(),o("span",ke,"---"))]),e("td",null,[t.banner?(s(),o("img",{key:0,src:t.banner,alt:"",width:"200",height:"100",style:{"object-fit":"contain"}},null,8,we)):(s(),o("span",Ve,"---"))]),e("td",null,c(t.created_at),1),e("td",null,[e("span",{class:"text-primary cursor-pointer",onClick:k=>F(t.id,"edit")},[r(d,{type:"edit",size:"15"})],8,Ie),e("span",{class:"text-danger cursor-pointer ms-1",onClick:k=>a(L)(n.main_url,t.id)},[r(d,{type:"trash",size:"15"})],8,Se)])],40,ge)}),128))])]),r(Q,{links:f.categories.links,from:f.categories.from,to:f.categories.to,total:f.categories.total},null,8,["links","from","to","total"])])])]),g((s(),o("div",Ce,[e("div",$e,[e("div",Me,[Ue,je,e("div",Te,[e("form",{onSubmit:E(D,["prevent"])},[e("div",Ee,[Le,g(e("input",{class:"form-control readonly","onUpdate:modelValue":l[2]||(l[2]=t=>a(u).title=t),type:"text",placeholder:"e.g latest faction"},null,512),[[U,a(u).title]]),n.errors.title?(s(),o("span",Ae,c(n.errors.title),1)):p("",!0)]),e("div",De,[e("div",Fe,[Pe,m(),r(b,{title:"If you want to add this category as a child then select an parent category"})]),r(v,{options:n.parent_categories,modelValue:a(u).parent_id,"onUpdate:modelValue":l[3]||(l[3]=t=>a(u).parent_id=t),label:"title",reduce:t=>t.id,placeholder:"Select Me As Parent"},null,8,["options","modelValue","reduce"]),n.errors.parent_id?(s(),o("span",ze,c(n.errors.parent_id),1)):p("",!0)]),e("div",Ne,[Oe,m(),r(b,{title:"Low number order level coming first"}),r(S,{modelValue:a(u).icon,"onUpdate:modelValue":l[4]||(l[4]=t=>a(u).icon=t)},null,8,["modelValue"]),n.errors.icon?(s(),o("span",qe,c(n.errors.icon),1)):p("",!0)]),e("div",We,[Ye,m(),r(b,{title:"Low number order level coming first"}),r(S,{modelValue:a(u).banner,"onUpdate:modelValue":l[5]||(l[5]=t=>a(u).banner=t)},null,8,["modelValue"]),n.errors.banner?(s(),o("span",Ge,c(n.errors.banner),1)):p("",!0)]),e("div",He,[h.value?(s(),o("button",Ke,[Qe,m(" Loading... ")])):(s(),o("button",Je,"Submit")),Re])],40,Be)])])])])),[[y,void 0,"modal"]]),g((s(),o("div",Xe,[e("div",Ze,[e("div",et,[tt,st,e("div",ot,[e("form",{onSubmit:E(P,["prevent"])},[e("div",nt,[at,g(e("input",{class:"form-control readonly","onUpdate:modelValue":l[6]||(l[6]=t=>a(i).title=t),type:"text",placeholder:"e.g latest faction"},null,512),[[U,a(i).title]]),n.errors.title?(s(),o("span",it,c(n.errors.title),1)):p("",!0)]),e("div",rt,[e("div",dt,[ct,m(),r(b,{title:"If you want to add this category as a child then select an parent category"})]),r(v,{options:n.parent_categories,modelValue:a(i).parent_id,"onUpdate:modelValue":l[7]||(l[7]=t=>a(i).parent_id=t),label:"title",reduce:t=>t.id,placeholder:"Select Me As Parent"},null,8,["options","modelValue","reduce"]),n.errors.parent_id?(s(),o("span",ut,c(n.errors.parent_id),1)):p("",!0)]),e("div",_t,[mt,m(),r(b,{title:"Low number order level coming first"}),r(S,{modelValue:a(i).icon,"onUpdate:modelValue":l[8]||(l[8]=t=>a(i).icon=t)},null,8,["modelValue"]),typeof a(i).icon=="string"?(s(),o("img",{key:0,src:a(i).icon,width:"50",height:"50",style:{"object-fit":"contain"},alt:""},null,8,pt)):p("",!0),n.errors.icon?(s(),o("span",bt,c(n.errors.icon),1)):p("",!0)]),e("div",ht,[gt,m(),r(b,{title:"Low number order level coming first"}),r(S,{modelValue:a(i).banner,"onUpdate:modelValue":l[9]||(l[9]=t=>a(i).banner=t)},null,8,["modelValue"]),typeof a(i).banner=="string"?(s(),o("img",{key:0,src:a(i).banner,width:"100",height:"70",style:{"object-fit":"contain"},alt:""},null,8,ft)):p("",!0),n.errors.banner?(s(),o("span",vt,c(n.errors.banner),1)):p("",!0)]),e("div",yt,[h.value?(s(),o("button",kt,[wt,m(" Loading... ")])):(s(),o("button",xt,"Update")),Vt])],40,lt)])])])])),[[y,void 0,"modal"]])]),_:1})}}};export{Lt as default};
