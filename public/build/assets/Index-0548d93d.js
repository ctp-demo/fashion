import{u as E,r as x,k as G,l as H,a as S,m as P,c as J,w as K,b as l,d as e,g as r,h as v,n as Q,q as m,v as w,e as o,s as z,t as _,i as n,F as A,f as b,y as L}from"./app-99513220.js";import{_ as R}from"./Layout-61dc6c62.js";import{d as X}from"./debounce-823fcc0a.js";import{_ as k}from"./ImageUploader-3ca64e71.js";import{a as Z}from"./index-dca72a42.js";import{_ as ee}from"./Pagination-2a74e1d8.js";import{u as te}from"./useAction-799874c3.js";import"./SideNav.vue_vue_type_style_index_1_scoped_d3198c53_lang-c8ddfb98.js";import"./useDataStore-d37a8ed6.js";import"./_baseGetTag-92f65be8.js";const se={class:"content-header row mb-1"},le={class:"col-12 d-flex align-items-center justify-content-between"},oe=e("h2",{class:"float-start mb-0"},"Child Category List",-1),ae={class:"btn btn-sm btn-gradient-primary d-flex align-items-center",type:"button","data-bs-toggle":"modal","data-bs-target":"#addItemModal"},ne=e("span",null,"Add Sub Sub Category",-1),ie={class:"app-user-list"},de={class:"card"},re={class:"card-datatable table-responsive pt-0 px-2"},ce={class:"d-flex align-items-center justify-content-between border-bottom"},ue={class:"select-search-area d-flex align-items-center"},_e=e("option",{value:void 0},"10",-1),me=e("option",{value:"25"},"25",-1),be=e("option",{value:"50"},"50",-1),pe=e("option",{value:"100"},"100",-1),he=[_e,me,be,pe],ge={class:"d-flex align-items-center justify-content-center justify-content-lg-end flex-lg-nowrap flex-wrap"},ve={class:"select-search-area"},fe={class:"category-list-table table"},ye=e("thead",{class:"table-light"},[e("tr",{class:"null"},[e("th",{class:"sorting"},"Id"),e("th",{class:"sorting"},"name"),e("th",{class:"sorting"},"Parent"),e("th",{class:"sorting"},"icon"),e("th",{class:"sorting"},"banner"),e("th",{class:"sorting"},"Created At"),e("th",{class:"sorting"})])],-1),xe={key:0,class:"d-flex align-items-center"},ke={class:"text-info",style:{"margin-left":"5px"}},Ve={key:1,class:"text-capitalize"},Ce={class:"d-flex flex-column"},Se={class:"text-black fw-bold text-capitalize"},we={class:"text-black fw-bold text-capitalize"},Ie=["src"],$e={key:1},Ue=["src"],Me={key:1},Te=["onClick"],je=["onClick"],Be={class:"modal modal-slide-in fade",id:"addItemModal","aria-hidden":"true"},Ee={class:"modal-dialog"},Pe={class:"modal-content p-0"},ze=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},"×",-1),Ae=e("div",{class:"modal-header mb-1"},[e("h5",{class:"modal-title"},[e("span",{class:"align-middle"},"Add Category")])],-1),Le={class:"modal-body flex-grow-1"},Fe={key:0},De={class:"m-0 p-0 text-danger"},Ne=["onSubmit"],Oe={class:"mb-1"},qe=e("label",{class:"form-label"},"Title",-1),We={class:"mb-1"},Ye={class:"d-flex align-baseline"},Ge=e("label",null,"Parent Category",-1),He={key:0,class:"mb-1"},Je={class:"d-flex align-baseline"},Ke=e("label",null,"Sub Category",-1),Qe={class:"mb-1"},Re=e("label",null,"Icon Image",-1),Xe={class:"mb-1"},Ze=e("label",null,"Banner Image",-1),et={class:"d-flex flex-wrap mb-0"},tt={key:0,type:"submit",class:"btn btn-primary"},st={key:1,class:"btn btn-primary",type:"button",disabled:""},lt=e("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),ot=e("button",{type:"reset",class:"btn btn-outline-secondary ms-1"},"Cancel",-1),at={class:"modal modal-slide-in fade",id:"editItemModal","aria-hidden":"true"},nt={class:"modal-dialog"},it={class:"modal-content p-0"},dt=e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},"×",-1),rt=e("div",{class:"modal-header mb-1"},[e("h5",{class:"modal-title"},[e("span",{class:"align-middle"},"Edit This Category")])],-1),ct={class:"modal-body flex-grow-1"},ut=["onSubmit"],_t={class:"mb-1"},mt=e("label",{class:"form-label"},"Title",-1),bt={key:0,class:"text-danger"},pt={class:"mb-1"},ht=e("div",{class:"d-flex align-baseline"},[e("label",null,"Parent Category")],-1),gt={key:0,class:"text-danger"},vt={key:0,class:"mb-1"},ft=e("div",{class:"d-flex align-baseline"},[e("label",null,"Sub Category")],-1),yt={key:0,class:"text-danger"},xt={class:"mb-1"},kt=e("label",null,"Icon Image",-1),Vt=["src"],Ct={key:1,class:"text-danger"},St={class:"mb-1"},wt=e("label",null,"Banner Image",-1),It=["src"],$t={key:1,class:"text-danger"},Ut={class:"d-flex flex-wrap mb-0"},Mt={key:0,type:"submit",class:"btn btn-primary"},Tt={key:1,class:"btn btn-primary",type:"button",disabled:""},jt=e("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1),Bt=e("button",{type:"reset",class:"btn btn-outline-secondary ms-1"},"Cancel",-1),Yt={__name:"Index",props:{categories:[]|null,parent_categories:[]|null,sub_categories:[]|null,main_url:String|null,errors:Object|null,filters:Object},setup(f){const i=f,{deleteItem:F,copyToClipboard:Et}=te();let c=E({title:null,parent_id:null,sub_cat_id:null,order_level:null,type:null,icon:null,banner:null}),a=E({title:null,parent_id:null,sub_cat_id:null,order_level:null,type:null,icon:null,banner:null});const p=x(!1),I=x(null),D=()=>{I.value=null,c.post(i.main_url,{preserveState:!0,replace:!0,onStart:u=>{console.log("res "+u),p.value=!0},onSuccess:u=>{document.getElementById("addItemModal").$vb.modal.hide(),p.value=!1,c.reset(),$sToast.fire({icon:"success",title:"Category added successfully"})},onError:u=>{p.value=!1,$toast.error("Validation Errors...")}})},N=()=>{a.post(i.main_url+"/update-with-files/"+a.id,{preserveState:!0,replace:!0,onStart:u=>{console.log("res "+u),p.value=!0},onSuccess:u=>{document.getElementById("editItemModal").$vb.modal.hide(),p.value=!1,c.reset(),$sToast.fire({icon:"success",title:"Updated successfully"})},onError:u=>{p.value=!1,$toast.error("Validation Errors...")}})},y=x(null),$=u=>{c.sub_cat_id=null,a.sub_cat_id=null,y.value=i.sub_categories.filter(s=>s.category_id===u)},O=(u,s)=>{I.value=null,Z.get(`${i.main_url}/${u}`).then(d=>{var h,g;a.id=d.data.id,a.title=d.data.title,a.parent_id=(h=d.data.category)==null?void 0:h.id,a.sub_cat_id=(g=d.data.sub_category)==null?void 0:g.id,a.order_level=d.data.order_level,a.type=d.data.type,a.icon=d.data.icon,a.banner=d.data.banner,y.value=d.data.category.sub_categories,document.getElementById("editItemModal").$vb.modal.show(),console.log(d)}).catch(d=>{$toast.error(d.message)})},V=x(),C=x();return G([V,C],X(function([u,s]){H.Inertia.get(i.main_url,{search:u,perPage:s},{preserveState:!0,replace:!0})},300)),(u,s)=>{const d=S("vue-feather"),h=S("info"),g=S("vSelect"),q=P("c-tooltip"),U=P("vb-is");return l(),J(R,null,{default:K(()=>{var M,T;return[e("div",se,[e("div",le,[oe,e("button",ae,[r(d,{type:"plus",size:"15"}),ne])])]),e("section",ie,[e("div",de,[e("div",re,[e("div",ce,[e("div",ue,[v(e("select",{class:"form-select","onUpdate:modelValue":s[0]||(s[0]=t=>C.value=t)},he,512),[[Q,C.value]])]),e("div",ge,[e("div",ve,[e("label",null,[m("Search "),v(e("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>V.value=t),type:"search",class:"form-control",placeholder:"What You Find ?","aria-controls":"DataTables_Table_0"},null,512),[[w,V.value]])])])])]),e("table",fe,[ye,e("tbody",null,[(l(!0),o(A,null,z(f.categories.data,(t,W)=>{var j,B;return l(),o("tr",{key:t.id},[e("td",null,"#_"+_(W+1),1),e("td",null,[t.childrens_count>0?(l(),o("span",xe,[m(_(t.title)+" ",1),v((l(),o("span",ke,[r(d,{type:"info",size:"15"})])),[[q,`${t.childrens_count} Child In This Category.`]])])):(l(),o("span",Ve,_(t.title),1))]),e("td",null,[e("div",Ce,[e("small",null,[m("Category: "),e("span",Se,_((j=t.category)==null?void 0:j.title),1)]),e("small",null,[m("Sub Category: "),e("span",we,_((B=t.sub_cateogry)==null?void 0:B.title),1)])])]),e("td",null,[t.icon?(l(),o("img",{key:0,src:t.icon,alt:"",style:{"object-fit":"contain","max-height":"60px"}},null,8,Ie)):(l(),o("span",$e,"---"))]),e("td",null,[t.banner?(l(),o("img",{key:0,src:t.banner,alt:"",width:"200",height:"100",style:{"object-fit":"contain"}},null,8,Ue)):(l(),o("span",Me,"---"))]),e("td",null,_(t.created_at),1),e("td",null,[e("span",{class:"text-primary cursor-pointer",onClick:Y=>O(t.id,"edit")},[r(d,{type:"edit",size:"15"})],8,Te),e("span",{class:"text-danger cursor-pointer ms-1",onClick:Y=>n(F)(i.main_url,t.id)},[r(d,{type:"trash",size:"15"})],8,je)])])}),128))])]),r(ee,{links:f.categories.links,from:f.categories.from,to:f.categories.to,total:f.categories.total},null,8,["links","from","to","total"])])])]),v((l(),o("div",Be,[e("div",Ee,[e("div",Pe,[ze,Ae,e("div",Le,[i.errors?(l(),o("ul",Fe,[(l(!0),o(A,null,z(i.errors,t=>(l(),o("li",De,_(t),1))),256))])):b("",!0),e("form",{onSubmit:L(D,["prevent"])},[e("div",Oe,[qe,v(e("input",{class:"form-control readonly","onUpdate:modelValue":s[2]||(s[2]=t=>n(c).title=t),type:"text",placeholder:"e.g latest faction"},null,512),[[w,n(c).title]])]),e("div",We,[e("div",Ye,[Ge,m(),r(h,{title:"If you want to add this category as a child then select an parent category"})]),r(g,{options:i.parent_categories,modelValue:n(c).parent_id,"onUpdate:modelValue":[s[3]||(s[3]=t=>n(c).parent_id=t),$],label:"title",reduce:t=>t.id,placeholder:"Select Me As Parent"},null,8,["options","modelValue","reduce"])]),((M=y.value)==null?void 0:M.length)>0?(l(),o("div",He,[e("div",Je,[Ke,m(),r(h,{title:"If you want to add this category as a child then select an parent category"})]),r(g,{options:y.value,modelValue:n(c).sub_cat_id,"onUpdate:modelValue":s[4]||(s[4]=t=>n(c).sub_cat_id=t),label:"title",reduce:t=>t.id,placeholder:"Select Me As Parent"},null,8,["options","modelValue","reduce"])])):b("",!0),e("div",Qe,[Re,m(),r(h,{title:"Low number order level coming first"}),r(k,{modelValue:n(c).icon,"onUpdate:modelValue":s[5]||(s[5]=t=>n(c).icon=t)},null,8,["modelValue"])]),e("div",Xe,[Ze,m(),r(h,{title:"Low number order level coming first"}),r(k,{modelValue:n(c).banner,"onUpdate:modelValue":s[6]||(s[6]=t=>n(c).banner=t)},null,8,["modelValue"])]),e("div",et,[p.value?(l(),o("button",st,[lt,m(" Loading... ")])):(l(),o("button",tt,"Submit")),ot])],40,Ne)])])])])),[[U,void 0,"modal"]]),v((l(),o("div",at,[e("div",nt,[e("div",it,[dt,rt,e("div",ct,[e("form",{onSubmit:L(N,["prevent"])},[e("div",_t,[mt,v(e("input",{class:"form-control readonly","onUpdate:modelValue":s[7]||(s[7]=t=>n(a).title=t),type:"text",placeholder:"e.g latest faction"},null,512),[[w,n(a).title]]),i.errors.title?(l(),o("span",bt,_(i.errors.title),1)):b("",!0)]),e("div",pt,[ht,r(g,{options:i.parent_categories,modelValue:n(a).parent_id,"onUpdate:modelValue":[s[8]||(s[8]=t=>n(a).parent_id=t),$],label:"title",reduce:t=>t.id,placeholder:"Select Me As Parent"},null,8,["options","modelValue","reduce"]),i.errors.parent_id?(l(),o("span",gt,_(i.errors.parent_id),1)):b("",!0)]),((T=y.value)==null?void 0:T.length)>0?(l(),o("div",vt,[ft,r(g,{options:y.value,modelValue:n(a).sub_cat_id,"onUpdate:modelValue":s[9]||(s[9]=t=>n(a).sub_cat_id=t),label:"title",reduce:t=>t.id,placeholder:"Select Sub Cat"},null,8,["options","modelValue","reduce"]),i.errors.parent_id?(l(),o("span",yt,_(i.errors.parent_id),1)):b("",!0)])):b("",!0),e("div",xt,[kt,r(k,{modelValue:n(a).icon,"onUpdate:modelValue":s[10]||(s[10]=t=>n(a).icon=t)},null,8,["modelValue"]),typeof n(a).icon=="string"?(l(),o("img",{key:0,src:n(a).icon,width:"50",height:"50",style:{"object-fit":"contain"},alt:""},null,8,Vt)):b("",!0),i.errors.icon?(l(),o("span",Ct,_(i.errors.icon),1)):b("",!0)]),e("div",St,[wt,r(k,{modelValue:n(a).banner,"onUpdate:modelValue":s[11]||(s[11]=t=>n(a).banner=t)},null,8,["modelValue"]),typeof n(a).banner=="string"?(l(),o("img",{key:0,src:n(a).banner,width:"100",height:"70",style:{"object-fit":"contain"},alt:""},null,8,It)):b("",!0),i.errors.banner?(l(),o("span",$t,_(i.errors.banner),1)):b("",!0)]),e("div",Ut,[p.value?(l(),o("button",Tt,[jt,m(" Loading... ")])):(l(),o("button",Mt,"Submit")),Bt])],40,ut)])])])])),[[U,void 0,"modal"]])]}),_:1})}}};export{Yt as default};
